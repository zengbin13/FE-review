<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app"></div>
    <div id="app1"></div>
    <div id="app2"></div>
    <div id="app3"></div>
    <div id="app4"></div>
    <div id="app5"></div>
    <div id="app6"></div>
    <div id="app7"></div>
    <div id="app8"></div>
    <script src="../react/react.development.js" crossorigin></script>
    <script src="../react/react-dom.development.js" crossorigin></script>
    <script src="../react/babel.min.js"></script>
    
    <script type="text/babel">
        /* ReactDOM.render */ 
        let message = 'hello world2';
        ReactDOM.render(<h1>{message}</h1>, document.getElementById('app'))

        /* state */
        class Clock extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    date: new Date()
                }
            }
            componentDidMount() {
                this.timerID = setInterval(() => {
                    this.tick()
                }, 1000);
            }
            componentWillUnmount() {
                clearInterval(this.timerID)
            }
            render() {
                return (
                    <div>
                        <h3>hello, world</h3>
                        <p>It is {this.state.date.toLocaleTimeString()}</p>
                    </div>
                )
            }
            tick() {
                this.setState({
                    date: new Date()
                })
            }
        }
        ReactDOM.render(<Clock />, document.getElementById('app1'))

        /* 事件绑定 */
        class Toggle extends React.Component {
            constructor(props) {
                super(props)
                this.state = {
                    isToggleOn: true,
                }
                this.handleClick = this.handleClick.bind(this)
            }
            render() {
                return (
                    <button onClick={this.handleClick}>{this.state.isToggleOn ? 'on' : 'off' }</button>
                )
            }
            handleClick() {
                this.setState(state => ({
                    isToggleOn: !state.isToggleOn
                }))
            }
        }
        ReactDOM.render(<Toggle />, document.getElementById('app2'))

        // 列表渲染
        class MovieList extends React.Component {
            constructor(props) {
                super(props)
                this.state = {
                    movies: ['大话西游', '喜剧之王', '功夫', '长江七号']
                }
            }
            render() {
                return (
                    <ul>
                        {this.state.movies.map(item => {
                            return <li key={item}>{item}</li>
                        })}
                    </ul>
                )
            }
        }
        ReactDOM.render(<MovieList></MovieList>, document.getElementById('app3'))

        // 函数组件
        function Welcome(props) {
            return <h3>函数组件 -{false}-{undefined}-{null}-{NaN}-{0}-{''}-, {props.name}</h3>
        }
        ReactDOM.render(<Welcome name="小明"></Welcome>, document.getElementById('app4'))

        // 条件渲染 if
        function UserGreeting(props) {
            return <h1>Welcome back!</h1>;
        }

        function GuestGreeting(props) {
            return <h1>Please sign up.</h1>;
        }

        function Greeting(props) {
            const isLoggedIn = props.isLoggedIn
            if(isLoggedIn) {
                return <UserGreeting />
            } else {
                return <GuestGreeting />
            }
        }
        ReactDOM.render(<Greeting isLoggedIn={false}></Greeting>, document.getElementById('app5'))

        // 条件渲染 
        function LoginButtin(props) {
            return <button onClick={props.onClick}>login</button>
        }
        function LoginButton(props) {
            return <button onClick={props.onClick}>logon</button>
        }
        class LoginContorl extends React.Component {
            constructor(props) {
                super(props)
                this.state = {
                    isLoggedIn: false
                }
                this.handleClickIn = this.handleClickIn.bind(this)
                this.handleClickOn = this.handleClickOn.bind(this)
            }
            handleClickIn() {
                this.setState({
                    isLoggedIn: true
                })
            }
            handleClickOn() {
                this.setState({
                    isLoggedIn: false
                })
            }
            render() {
                const isLoggedIn = this.state.isLoggedIn;
                let button;
                if(isLoggedIn) {
                    button = <LoginButton onClick={this.handleClickOn}></LoginButton>
                } else {
                    button = <LoginButtin onClick={this.handleClickIn}></LoginButtin>
                }
                return (
                    <div>
                        <Greeting isLoggedIn={isLoggedIn}></Greeting>
                        {button}
                    </div>
                )
            }
        }
        ReactDOM.render(<LoginContorl></LoginContorl>, document.getElementById('app6'))

    </script>
</body>

</html>