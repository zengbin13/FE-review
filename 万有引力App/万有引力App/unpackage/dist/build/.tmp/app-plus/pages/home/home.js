(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/home"],{"0021":function(e,t,n){"use strict";(function(e){n("d38d"),n("921b");i(n("66fd"));var t=i(n("e540"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},"03e0":function(e,t,n){"use strict";n.r(t);var i=n("8b9c"),a=n.n(i);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);t["default"]=a.a},"47d3":function(e,t,n){"use strict";var i,a=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"b",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i})},"8b9c":function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=c(n("a34a")),r=n("2f62"),s=c(n("1691"));function c(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,i,a,r,s){try{var c=e[r](s),o=c.value}catch(u){return void n(u)}c.done?t(o):Promise.resolve(o).then(i,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(i,a){var r=e.apply(t,n);function s(e){o(r,i,a,s,c,"next",e)}function c(e){o(r,i,a,s,c,"throw",e)}s(void 0)})}}var l=function(){return n.e("components/load-more").then(n.bind(null,"8627"))},h=function(){return n.e("components/authLevel").then(n.bind(null,"771c"))},f={components:{LoadMore:l,AuthLevel:h},data:function(){return{src:"",loadingType:0,pageNum:0,pageSize:10,circles:[],isPullDownRefresh:!1,bannerList:[],notice:[],swiperHeight:0,swiperCurent:0,serviceImgUrl:this.$service.ServiceImgUrl,bar_Height:e.getSystemInfoSync().statusBarHeight}},computed:(0,r.mapState)(["hasLogin","userInfo"]),methods:{initBanner:function(){var t=u(a.default.mark(function t(){var n,i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getStorageSync("wyyl_home_banner"),n&&(this.bannerList=n),t.next=4,this.$service.home.list();case 4:i=t.sent,i.success&&(this.bannerList=i.data.data,e.setStorageSync("wyyl_home_banner",i.data.data));case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),initNotice:function(){var t=u(a.default.mark(function t(){var n,i;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getStorageSync("wyyl_home_notice"),n&&(this.notice=n),t.next=4,this.$service.notice.list({pageNum:1,pageSize:5});case 4:i=t.sent,i.success&&(this.notice=i.data.data.records,e.setStorageSync("wyyl_home_notice",i.data.data.records));case 6:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),initCircles:function(){var t=u(a.default.mark(function t(){var n,i,r;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0==this.loadingType){t.next=2;break}return t.abrupt("return");case 2:return this.loadingType=1,n=this.pageNum+1,t.next=6,this.$service.circle.circles({pageNum:n,pageSize:this.pageSize});case 6:i=t.sent,this.loadingType=0,i.success&&(1==n&&this.circles.length&&this.circles.splice(0,this.circles.length),r=i.data.data.records,r.length>0&&(this.circles=this.circles.concat(r),this.pageNum=n),(i.data.data.total<=this.pageNum*this.pageSize||r.length<this.pageSize)&&(this.loadingType=-1)),0==this.circles.length&&(this.loadingType=3),this.isPullDownRefresh&&(e.stopPullDownRefresh(),this.isPullDownRefresh=!1);case 11:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),initPush:function(){s.default.addNotifyMessageOpened(function(t){console.log(i("jpush.addNotifyMessageOpened",t," at pages\\home\\home.vue:153"));e.getStorageSync("wyyl_developer")}),s.default.addCustomizeNotifyMessage(function(t){console.log(i("jpush.addCustomizeNotifyMessage",t," at pages\\home\\home.vue:166"));e.getStorageSync("wyyl_developer")})},bannerTap:function(t){var n=this.bannerList[t];1==n.type?n.circleId&&e.navigateTo({url:"/pages/circle/circle_not/circle_not?circleId="+n.circleId}):2==n.type&&n.pathUrl&&e.navigateTo({url:"/pages/webview/webview?url="+n.pathUrl})},swiperChange:function(e){this.swiperCurent=e.detail.current},toCircle:function(t){var n=this.circles[t];n.isCreate||n.isJoin||n.isManage?e.navigateTo({url:"/pages/circle/circle_list/circle_list?circleId="+n.id}):e.navigateTo({url:"/pages/circle/circle_not/circle_not?circleId="+n.id})},toSearch:function(){e.navigateTo({url:"/pages/search/search"})},toMore:function(){e.navigateTo({url:"/pages/search/search?all=true"})},refresh:function(){var t=u(a.default.mark(function t(){var n,i,r,s,c;return a.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.initBanner(),this.initNotice(),0!=this.pageNum){t.next=7;break}this.loadingType=0,this.initCircles(),t.next=20;break;case 7:n=this.pageNum,i=[],r=1;case 10:if(!(r<=n)){t.next=18;break}return t.next=13,this.$service.circle.circles({pageNum:r,pageSize:this.pageSize});case 13:s=t.sent,s.success&&(c=s.data.data.records,c.length>0&&(i=i.concat(c)),r==n&&(s.data.data.total<=r*this.pageSize||c.length<this.pageSize?this.loadingType=-1:this.loadingType=0));case 15:r++,t.next=10;break;case 18:this.circles=i,this.isPullDownRefresh&&(e.stopPullDownRefresh(),this.isPullDownRefresh=!1);case 20:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()},onLoad:function(t){var n=0;n=e.upx2px(96),this.swiperHeight=e.getSystemInfoSync().windowHeight-n,this.initPush()},onNavigationBarButtonTap:function(t){1==t.index?this.toSearch():0==t.index&&e.navigateTo({url:"/pages/sysInfo/sysInfo"})},onShow:function(){this.hasLogin?this.refresh():e.reLaunch({url:"/pages/login/login"})},onReachBottom:function(){this.initCircles()},onPullDownRefresh:function(e){this.isPullDownRefresh=!0,this.refresh()}};t.default=f}).call(this,n("6e42")["default"],n("0de9")["default"])},"8e9c":function(e,t,n){},e540:function(e,t,n){"use strict";n.r(t);var i=n("47d3"),a=n("03e0");for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);n("e7b9");var s,c=n("f0c5"),o=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);t["default"]=o.exports},e7b9:function(e,t,n){"use strict";var i=n("8e9c"),a=n.n(i);a.a}},[["0021","common/runtime","common/vendor"]]]);