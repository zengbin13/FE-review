(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/circle/circle_user/circle_user"],{"2ac1":function(e,t,r){"use strict";(function(e){r("d38d"),r("921b");s(r("66fd"));var t=s(r("b5f7"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"4b1b":function(e,t,r){},"84ef":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(r("a34a")),i=r("2f62");function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r,s,i,n,a){try{var c=e[n](a),u=c.value}catch(l){return void r(l)}c.done?t(u):Promise.resolve(u).then(s,i)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(s,i){var n=e.apply(t,r);function c(e){a(n,s,i,c,u,"next",e)}function u(e){a(n,s,i,c,u,"throw",e)}c(void 0)})}}var u=function(){return r.e("components/load-more").then(r.bind(null,"8627"))},l={components:{LoadMore:u},data:function(){return{loadingType:0,circleId:0,pageNum:0,pageSize:20,status:0,rule:0,statusParam:0,mlist:[],ulist:[],scrollHeight:0,serviceImgUrl:this.$service.ServiceImgUrl,bar_Height:e.getSystemInfoSync().statusBarHeight}},computed:(0,i.mapState)(["hasLogin","userInfo"]),methods:{init:function(){var e=c(s.default.mark(function e(){var t,r,i,n;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0==this.loadingType){e.next=2;break}return e.abrupt("return");case 2:return this.loadingType=1,t=this.pageNum+1,e.next=6,this.$service.userCircle.list({circleId:this.circleId,pageNum:t,pageSize:this.pageSize});case 6:if(r=e.sent,this.loadingType=0,0==r.data.status){if(i=r.data.data.records,i.length>0)for(this.pageNum=t,n=0;n<i.length;n++)0==i[n].rules?this.ulist.push(i[n]):this.mlist.push(i[n]);(r.data.data.total<=this.pageNum*this.pageSize||i.length<this.pageSize)&&(this.loadingType=2)}0==this.ulist.length&&(this.loadingType=3);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),actionList:function(t,r){var s=this,i=0==t?this.mlist[r]:this.ulist[r];2==this.rule&&this.userInfo.id!=i.userId&&(0==i.rules?e.showActionSheet({itemList:["设为合伙人",i.isBlack?"移除黑名单":"加入黑名单","删除圈子成员"],success:function(e){0==e.tapIndex?s.setManager(i.userId):1==e.tapIndex?i.isBlack?s.removeBlack(i.userId):s.addBlack(i.userId):2==e.tapIndex&&s.deleteUser(i.userId)}}):1==i.rules&&e.showActionSheet({itemList:["移除合伙人权限",i.isBlack?"移除黑名单":"加入黑名单","删除圈子成员"],success:function(e){0==e.tapIndex?s.removeManager(i.userId):1==e.tapIndex?i.isBlack?s.removeBlack(i.userId):s.addBlack(i.userId):2==e.tapIndex&&s.deleteUser(i.userId)}}))},refresh:function(){var e=c(s.default.mark(function e(){var t,r,i,n,a,c,u;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.pageNum,0!=t){e.next=5;break}return this.loadingType=0,this.init(),e.abrupt("return");case 5:r=[],i=[],n=1;case 8:if(!(n<=t)){e.next=16;break}return e.next=11,this.$service.userCircle.list({circleId:this.circleId,pageNum:n,pageSize:this.pageSize});case 11:if(a=e.sent,a.success){if(c=a.data.data.records,c.length>0)for(u=0;u<c.length;u++)0==c[u].rules?r.push(c[u]):i.push(c[u]);n==t&&(a.data.data.total<=t*this.pageSize||c.length<this.pageSize?this.loadingType=2:this.loadingType=0)}case 13:n++,e.next=8;break;case 16:this.ulist=r,this.mlist=i,0==r.length&&(this.loadingType=3);case 19:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setManager:function(){var e=c(s.default.mark(function e(t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.userCircle.add({circleId:this.circleId,userId:t});case 2:r=e.sent,r.success&&(this.$util.showSuccess("设置成功"),this.refresh());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),removeManager:function(){var e=c(s.default.mark(function e(t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.userCircle.remove({circleId:this.circleId,userId:t});case 2:r=e.sent,r.success&&(this.$util.showSuccess("移除成功"),this.refresh());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),addBlack:function(){var e=c(s.default.mark(function e(t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.circleBlacklist.add({circleId:this.circleId,accountId:t});case 2:r=e.sent,r.success&&(this.$util.showSuccess("加入成功"),this.refresh());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),removeBlack:function(){var e=c(s.default.mark(function e(t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.circleBlacklist.remove({circleId:this.circleId,accountId:t});case 2:r=e.sent,r.success&&(this.$util.showSuccess("移除成功"),this.refresh());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),deleteUser:function(){var e=c(s.default.mark(function e(t){var r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$service.userCircle.deletes({circleId:this.circleId,userId:t});case 2:r=e.sent,r.success&&(this.$util.showSuccess("删除成功"),this.refresh());case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},onLoad:function(t){this.circleId=t.circleId||0,this.rule=t.rule?Number(t.rule):0,this.status=0==this.rule?0:1,this.statusParam=2==this.rule?void 0:1==this.rule?1:0,this.init(),this.scrollHeight=e.getSystemInfoSync().windowHeight}};t.default=l}).call(this,r("6e42")["default"])},"8a83":function(e,t,r){"use strict";var s=r("4b1b"),i=r.n(s);i.a},9436:function(e,t,r){"use strict";var s,i=function(){var e=this,t=e.$createElement;e._self._c},n=[];r.d(t,"b",function(){return i}),r.d(t,"c",function(){return n}),r.d(t,"a",function(){return s})},b5f7:function(e,t,r){"use strict";r.r(t);var s=r("9436"),i=r("c7ff");for(var n in i)"default"!==n&&function(e){r.d(t,e,function(){return i[e]})}(n);r("8a83");var a,c=r("f0c5"),u=Object(c["a"])(i["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);t["default"]=u.exports},c7ff:function(e,t,r){"use strict";r.r(t);var s=r("84ef"),i=r.n(s);for(var n in s)"default"!==n&&function(e){r.d(t,e,function(){return s[e]})}(n);t["default"]=i.a}},[["2ac1","common/runtime","common/vendor"]]]);