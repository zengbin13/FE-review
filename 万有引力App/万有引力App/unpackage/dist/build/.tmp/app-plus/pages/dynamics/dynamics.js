(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/dynamics/dynamics"],{4658:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("a34a"));function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n,i,s,a,r){try{var c=t[a](r),o=c.value}catch(u){return void n(u)}c.done?e(o):Promise.resolve(o).then(i,s)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var r=t.apply(e,n);function c(t){a(r,i,s,c,o,"next",t)}function o(t){a(r,i,s,c,o,"throw",t)}c(void 0)})}}var c=function(){return n.e("components/load-more").then(n.bind(null,"8627"))},o=function(){return n.e("components/authLevel").then(n.bind(null,"771c"))},u={components:{LoadMore:c,AuthLevel:o},data:function(){return{status:1,loadingType:0,pageNum:0,pageSize:10,isPullDownRefresh:!1,dynamicsList:[],scrollHeight:0,serviceImgUrl:this.$service.ServiceImgUrl}},methods:{init:function(){var e=r(i.default.mark(function e(){var n,s,a,r;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0==this.loadingType){e.next=2;break}return e.abrupt("return");case 2:return this.loadingType=1,n=this.pageNum+1,e.next=6,this.$service.dynamic.list({pageNum:n,pageSize:this.pageSize,status:this.status});case 6:if(s=e.sent,this.loadingType=0,s.success){if(1==n&&this.dynamicsList.length&&this.dynamicsList.splice(0,this.dynamicsList.length),a=s.data.data.records,a.length>0){for(this.pageNum=n,r=0;r<a.length;r++)a[r].contextImg&&a[r].contextImg.split(">>").length>1&&(a[r].contextImg=a[r].contextImg.split(">>")[0]);this.dynamicsList=this.dynamicsList.concat(a)}(s.data.data.total<=this.pageNum*this.pageSize||a.length<this.pageSize)&&(this.loadingType=this.dynamicsList.length>5?2:-1)}0==this.dynamicsList.length&&(this.loadingType=3),this.isPullDownRefresh&&(t.stopPullDownRefresh(),this.isPullDownRefresh=!1);case 11:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),tocircle:function(e){var n=this.dynamicsList[e];0==n.chargeType||1==n.chargeType&&1==n.isPay?t.navigateTo({url:"/pages/circle/circle_detail/circle_detail?dynaId="+n.id}):t.navigateTo({url:"/pages/free_theme/free_theme?dynaId="+n.id})},refresh:function(){var e=r(i.default.mark(function e(){var n,s,a,r,c,o;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.pageNum,0!=n){e.next=5;break}return this.loadingType=0,this.init(),e.abrupt("return");case 5:s=[],a=1;case 7:if(!(a<=n)){e.next=15;break}return e.next=10,this.$service.dynamic.list({pageNum:a,pageSize:this.pageSize,status:this.status});case 10:if(r=e.sent,r.success){if(c=r.data.data.records,c.length>0){for(o=0;o<c.length;o++)c[o].contextImg&&c[o].contextImg.split(">>").length>1&&(c[o].contextImg=c[o].contextImg.split(">>")[0]);s=s.concat(c)}a==n&&(r.data.data.total<=n*this.pageSize||c.length<this.pageSize?this.loadingType=s.length>5?2:-1:this.loadingType=0)}case 12:a++,e.next=7;break;case 15:this.dynamicsList=s,this.isPullDownRefresh&&(t.stopPullDownRefresh(),this.isPullDownRefresh=!1);case 17:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()},onLoad:function(){var e=t.getSystemInfoSync(),n=e.windowHeight;n=e.windowHeight-50,this.scrollHeight=n},onShow:function(){this.refresh()},onReachBottom:function(){this.init()},onPullDownRefresh:function(t){this.isPullDownRefresh=!0,this.refresh()}};e.default=u}).call(this,n("6e42")["default"])},"4cd4":function(t,e,n){"use strict";var i=n("c884"),s=n.n(i);s.a},"5b87":function(t,e,n){"use strict";var i,s=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},"91e0":function(t,e,n){"use strict";n.r(e);var i=n("5b87"),s=n("a6da");for(var a in s)"default"!==a&&function(t){n.d(e,t,function(){return s[t]})}(a);n("4cd4");var r,c=n("f0c5"),o=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=o.exports},a6da:function(t,e,n){"use strict";n.r(e);var i=n("4658"),s=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=s.a},b0d9:function(t,e,n){"use strict";(function(t){n("d38d"),n("921b");i(n("66fd"));var e=i(n("91e0"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},c884:function(t,e,n){}},[["b0d9","common/runtime","common/vendor"]]]);